<!DOCTYPE html>
<html>
<head>
	<title>Lost and Found</title>
</head>
<body>
	<h1>Report Lost Item</h1>

	<!-- List of lost items already reported -->
	<h2>Lost Items:</h2>
	<table>
		<tr>
			<th>Name</th>
			<th>Location</th>
			<th>Image</th>
			<th>Found?</th>
		</tr>
		<?php
		// Connect to the MySQL database
		$servername = "localhost";
		$username = "root";
		$password = "";
		$dbname = "lost_found";

		$conn = mysqli_connect($servername, $username, $password, $dbname);

		if (!$conn) {
		    die("Connection failed: " . mysqli_connect_error());
		}

		// Retrieve the list of lost items
		$sql = "SELECT * FROM lost_items";
		$result = mysqli_query($conn, $sql);

		if (mysqli_num_rows($result) > 0) {
			// Loop through each lost item and display it in a table row
			while($row = mysqli_fetch_assoc($result)) {
				echo "<tr>";
				echo "<td>" . $row["name"] . "</td>";
				echo "<td>" . $row["location"] . "</td>";
				echo "<td><img src='uploads/$row["image"]' width='100'></td>";
				echo "<td><form action='found_item.php' method='post'><input type='hidden' name='item_id' value='" . $row["id"] . "'><input type='submit' value='Found'></form></td>";
				echo "</tr>";
			}
		} else {
			echo "No lost items found.";
		}

		// Close the MySQL connection
		mysqli_close($conn);
		?>
	</table>

	<!-- Form to report a new lost item -->
	<h2>Report a Lost Item:</h2>
	<form action="submit_lost_item.php" method="post" enctype="multipart/form-data">
		<label for="name">Your Name:</label>
		<input type="text" id="name" name="name" required><br>

		<label for="location">Location Where Item Was Lost:</label>
		<input type="text" id="location" name="location" required><br>

		<label for="image">Image of Lost Item:</label>
		<input type="file" id="image" name="image" accept="image/*" required><br>

		<input type="submit" value="Submit">
	</form>
</body>
</html>
